<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodCellAI - System Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .section {
            margin-bottom: 40px;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid #667eea;
        }
        .section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.8em;
        }
        .section h3 {
            color: #764ba2;
            margin-top: 25px;
            font-size: 1.4em;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tech-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        .tech-card h4 {
            color: #667eea;
            margin-top: 0;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "‚úì";
            color: #2ecc71;
            font-weight: bold;
            margin-right: 10px;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        .metric-label {
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ BloodCellAI</h1>
            <p>Advanced YOLO-based AI System with Multi-Agent Intelligence and Enhanced Blood Cell Detection</p>
        </div>
        
        <div class="content">
            <!-- System Overview -->
            <div class="section">
                <h2>üìã System Overview</h2>
                <p>BloodCellAI is a comprehensive AI-powered hematological analysis platform that combines YOLO11 object detection with multi-agent intelligence, advanced image processing, and enhanced blood smear analysis to provide accurate blood cell identification, counting, and clinical assessment.</p>
                
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-value">3</div>
                        <div class="metric-label">Cell Types</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">>95%</div>
                        <div class="metric-label">Detection Accuracy</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">&lt;15s</div>
                        <div class="metric-label">Processing Time</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">5+</div>
                        <div class="metric-label">Enhancement Techniques</div>
                    </div>
                </div>
            </div>

            <!-- Main Architecture Diagram -->
            <div class="section">
                <h2>üèóÔ∏è System Architecture</h2>
                <div class="mermaid">
                    graph TB
                        %% Step 1: Data Input
                        DS["Blood Smear Dataset<br/>Blood Cell Images<br/>RBC, WBC, Platelets"]
                        PR["Patient Records<br/>Medical History<br/>Hematological Data"]
                        CC["Clinical Context<br/>Symptoms<br/>Laboratory Values"]
                        
                        %% Step 2: Frontend Interface
                        ST["Streamlit Web App<br/>Main Interface"]
                        IU["Image Upload<br/>Drag & Drop"]
                        
                        %% Step 3: Backend Processing
                        BE["Backend Processing<br/>Orchestration"]
                        DM["Dependency Manager<br/>Auto Installation"]
                        ML["Model Loader<br/>YOLO11n Loading"]
                        IP["Image Preprocessor<br/>Blood Smear Enhancement"]
                        
                        %% Step 4: AI Models
                        YOLO_FT["YOLO11n Model<br/>Blood Cell Detection<br/>Object Detection"]
                        CNN_FT["Enhanced CNN<br/>Cell Classification<br/>Multi-Strategy Detection"]
                        
                        %% Step 5: Multi-Agent System
                        AO["Agent Orchestrator<br/>Multi-Agent Coordination"]
                        MA["Medical Analysis Agent<br/>Hematological Assessment<br/>Clinical Interpretation"]
                        DA["Risk Assessment Agent<br/>Blood Disorder Analysis<br/>Abnormality Detection"]
                        RA["Treatment Advisor Agent<br/>Evidence-based Protocols<br/>Follow-up Recommendations"]
                        
                        %% Step 6: Image Enhancement
                        IE["Image Enhancement<br/>Blood Smear Preprocessing"]
                        ED["Edge Detection<br/>Cell Boundary Enhancement"]
                        BF["Bilateral Filtering<br/>Noise Reduction"]
                        CL["CLAHE<br/>Contrast Enhancement"]
                        MO["Morphological Ops<br/>Cell Structure Enhancement"]
                        
                        %% Step 7: Results & Reports
                        RD["Results Display<br/>Cell Counts<br/>Confidence Scores"]
                        BB["Bounding Boxes<br/>Cell Localization"]
                        QA["Quality Assessment<br/>Detection Reliability"]
                        MC["Model Validation<br/>Performance Metrics"]
                        
                        %% Step 8: Model Pipeline
                        MV["Model Validation<br/>Pipeline Testing"]
                        FB["Fallback Models<br/>Enhanced CV Detection"]
                        ER["Error Recovery<br/>Graceful Degradation"]
                        TE["Testing Framework<br/>Automated Validation"]
                        
                        %% Serial Flow - Main Process
                        DS --> ST
                        PR --> ST
                        CC --> ST
                        ST --> IU
                        IU --> BE
                        BE --> DM
                        DM --> ML
                        ML --> IP
                        IP --> YOLO_FT
                        IP --> CNN_FT
                        YOLO_FT --> AO
                        CNN_FT --> AO
                        AO --> MA
                        AO --> DA
                        AO --> RA
                        MA --> IE
                        DA --> IE
                        RA --> IE
                        IE --> ED
                        IE --> BF
                        IE --> CL
                        IE --> MO
                        ED --> RD
                        BF --> RD
                        CL --> RD
                        MO --> RD
                        RD --> BB
                        RD --> QA
                        RD --> MC
                        
                        %% Model Pipeline - Parallel Process
                        DS --> MV
                        MV --> FB
                        FB --> ER
                        ER --> TE
                        TE --> YOLO_FT
                        
                        %% Styling
                        classDef dataLayer fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        classDef frontendLayer fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef backendLayer fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        classDef modelsLayer fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        classDef agentsLayer fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef vizLayer fill:#1abc9c,stroke:#16a085,stroke-width:2px,color:#fff
                        classDef resultsLayer fill:#34495e,stroke:#2c3e50,stroke-width:2px,color:#fff
                        classDef modelLayer fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
                        
                        class DS,PR,CC dataLayer
                        class ST,IU frontendLayer
                        class BE,DM,ML,IP backendLayer
                        class YOLO_FT,CNN_FT modelsLayer
                        class AO,MA,DA,RA agentsLayer
                        class IE,ED,BF,CL,MO vizLayer
                        class RD,BB,QA,MC resultsLayer
                        class MV,FB,ER,TE modelLayer
                </div>
            </div>

            <!-- Detailed Workflow -->
            <div class="section">
                <h2>üîÑ Detailed Workflow</h2>
                <div class="mermaid">
                    flowchart TD
                        Start([Start]) --> Upload[Upload Blood Smear Image]
                        Upload --> Preprocess[Image Preprocessing<br/>Enhancement & Normalization]
                        Preprocess --> ModelLoad[Load YOLO Model<br/>Model Validation]
                        ModelLoad --> Enhancement[Blood Smear Enhancement<br/>CLAHE, Bilateral Filter, Edge Detection]
                        Enhancement --> MultiStrategy[Multi-Strategy Detection<br/>Scale Variations & Gamma Correction]
                        MultiStrategy --> YOLO[YOLO Blood Cell Detection<br/>Confidence Thresholds & IoU]
                        YOLO --> AgentAnalysis[Multi-Agent Analysis<br/>Hematological Assessment & Risk Evaluation]
                        AgentAnalysis --> Classification[Cell Classification<br/>RBC, WBC, Platelets]
                        Classification --> Visualizations[Generate Visualizations]
                        
                        Visualizations --> BoundingBoxes[Bounding Boxes<br/>Cell Localization]
                        Visualizations --> ConfidenceMap[Confidence Mapping<br/>Detection Quality]
                        Visualizations --> EdgeDetection[Enhanced Edge Detection<br/>Cell Boundary Highlighting]
                        Visualizations --> QualityAssess[Quality Assessment<br/>Detection Reliability]
                        Visualizations --> ModelMetrics[Model Metrics<br/>Performance Analysis]
                        
                        BoundingBoxes --> Report[Generate Report]
                        ConfidenceMap --> Report
                        EdgeDetection --> Report
                        QualityAssess --> Report
                        ModelMetrics --> Report
                        
                        Report --> Display[Display Results]
                        Display --> End([End])
                        
                        %% Data Sources
                        Dataset[Blood Smear Dataset<br/>Cell Images] --> Preprocess
                        PatientData[Patient Records<br/>Medical History] --> AgentAnalysis
                        ClinicalContext[Clinical Context<br/>Hematological Data] --> AgentAnalysis
                        
                        %% Styling
                        classDef startEnd fill:#2ecc71,stroke:#27ae60,stroke-width:3px,color:#fff
                        classDef process fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef model fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        classDef agent fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef viz fill:#1abc9c,stroke:#16a085,stroke-width:2px,color:#fff
                        classDef data fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        
                        class Start,End startEnd
                        class Upload,Preprocess,Visualizations,Report,Display process
                        class ModelLoad,YOLO,Classification model
                        class AgentAnalysis agent
                        class BoundingBoxes,ConfidenceMap,EdgeDetection,QualityAssess,ModelMetrics viz
                        class Dataset,PatientData,ClinicalContext data
                </div>
            </div>

            <!-- Multi-Agent Architecture -->
            <div class="section">
                <h2>ü§ñ Multi-Agent Architecture</h2>
                
                <!-- Agent Orchestrator Overview -->
                <div class="mermaid">
                    graph TB
                        subgraph Orchestrator["üéØ Agent Orchestrator - Central Intelligence"]
                            AO[Agent Orchestrator<br/>Multi-Agent Coordination<br/>Task Distribution & Management]
                            TC[Task Coordinator<br/>Request Routing & Prioritization]
                            SC[State Controller<br/>Agent Status Monitoring]
                            CC[Communication Controller<br/>Inter-Agent Messaging]
                            QC[Quality Controller<br/>Output Validation & Verification]
                        end
                        
                        %% Orchestrator Components
                        AO --> TC
                        AO --> SC
                        AO --> CC
                        AO --> QC
                        
                        %% Styling
                        classDef orchestrator fill:#667eea,stroke:#5a6fd8,stroke-width:3px,color:#fff
                        class AO,TC,SC,CC,QC orchestrator
                </div>
                
                <!-- Medical Analysis Agent -->
                <div class="mermaid">
                    graph TB
                        subgraph MedicalAgent["üè• Medical Analysis Agent - Clinical Expertise"]
                            MA[Medical Analysis Agent<br/>LangChain + Groq LLM]
                            FA[Hematological Assessment<br/>Cell Count Analysis & Morphology]
                            RA[Risk Assessment<br/>Blood disorder probability<br/>Abnormality detection]
                            DD[Differential Diagnosis<br/>Multiple possible conditions<br/>Clinical reasoning]
                            MK[Medical Knowledge Integration<br/>Hematological guidelines<br/>Evidence-based medicine]
                            CS[Confidence Scoring<br/>Uncertainty quantification<br/>Reliability metrics]
                            CL[Clinical Language Processing<br/>Medical terminology<br/>Hematological context understanding]
                        end
                        
                        %% Medical Agent Flow
                        MA --> FA
                        MA --> RA
                        MA --> DD
                        MA --> MK
                        MA --> CS
                        MA --> CL
                        
                        FA --> RA
                        RA --> DD
                        DD --> CS
                        MK --> FA
                        MK --> RA
                        CL --> DD
                        
                        %% Styling
                        classDef medicalAgent fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        class MA,FA,RA,DD,MK,CS,CL medicalAgent
                </div>
                
                <!-- Risk Assessment Agent -->
                <div class="mermaid">
                    graph TB
                        subgraph RiskAgent["‚ö†Ô∏è Risk Assessment Agent - Blood Disorder Analysis"]
                            RAA[Risk Assessment Agent<br/>Blood Disorder Analysis & Prediction]
                            CF[Disorder Forecasting<br/>Hematological complications prediction<br/>Risk modeling]
                            PF[Prognostic Factors<br/>Disease progression estimation<br/>Outcome prediction]
                            RF[Risk Factors Analysis<br/>Patient-specific risk assessment<br/>Comorbidity evaluation]
                            MS[Monitoring Strategy<br/>Follow-up scheduling<br/>Alert systems]
                            RM[Risk Mitigation<br/>Prevention strategies<br/>Intervention recommendations]
                            PS[Patient Stratification<br/>Risk-based categorization<br/>Priority assignment]
                        end
                        
                        %% Risk Agent Flow
                        RAA --> CF
                        RAA --> PF
                        RAA --> RF
                        RAA --> MS
                        RAA --> RM
                        RAA --> PS
                        
                        CF --> PF
                        RF --> CF
                        PF --> MS
                        MS --> RM
                        RF --> PS
                        
                        %% Styling
                        classDef riskAgent fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        class RAA,CF,PF,RF,MS,RM,PS riskAgent
                </div>
                
                <!-- Treatment Advisor Agent -->
                <div class="mermaid">
                    graph TB
                        subgraph TreatmentAgent["üíä Treatment Advisor Agent - Evidence-based Protocols"]
                            TAA[Treatment Advisor Agent<br/>Evidence-based Treatment Planning]
                            TP[Treatment Protocols<br/>Hematological care guidelines<br/>Best practice recommendations]
                            SP[Intervention Planning<br/>Treatment indication assessment<br/>Procedure recommendations]
                            RP[Management Planning<br/>Therapeutic protocols<br/>Recovery timelines]
                            MP[Medication Protocols<br/>Hematological treatments<br/>Therapeutic interventions]
                            FU[Follow-up Planning<br/>Monitoring schedules<br/>Assessment protocols]
                            EBM[Evidence-Based Medicine<br/>Literature integration<br/>Hematological guidelines]
                        end
                        
                        %% Treatment Agent Flow
                        TAA --> TP
                        TAA --> SP
                        TAA --> RP
                        TAA --> MP
                        TAA --> FU
                        TAA --> EBM
                        
                        TP --> SP
                        SP --> RP
                        RP --> FU
                        EBM --> TP
                        EBM --> SP
                        MP --> RP
                        
                        %% Styling
                        classDef treatmentAgent fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        class TAA,TP,SP,RP,MP,FU,EBM treatmentAgent
                </div>
                
                <!-- Agent Interactions -->
                <div class="mermaid">
                    graph TB
                        subgraph Interactions["üîÑ Agent Interactions & Workflow"]
                            AO[Agent Orchestrator<br/>Central Coordinator]
                            MA[Medical Analysis Agent<br/>Clinical Expertise]
                            RAA[Risk Assessment Agent<br/>Complication Analysis]
                            TAA[Treatment Advisor Agent<br/>Evidence-based Protocols]
                            
                            %% Interaction Types
                            CO[Clinical Output<br/>Cell count assessment, Diagnosis]
                            RO[Risk Output<br/>Blood disorders, Prognosis, Monitoring]
                            TO[Treatment Output<br/>Protocols, Management, Follow-up]
                            FO[Final Output<br/>Integrated Analysis & Recommendations]
                        end
                        
                        %% Agent Coordination
                        AO --> MA
                        AO --> RAA
                        AO --> TAA
                        
                        %% Output Integration
                        MA --> CO
                        RAA --> RO
                        TAA --> TO
                        
                        CO --> FO
                        RO --> FO
                        TO --> FO
                        
                        %% Cross-Agent Communication
                        MA -.-> RAA
                        MA -.-> TAA
                        RAA -.-> TAA
                        
                        %% Styling
                        classDef orchestrator fill:#667eea,stroke:#5a6fd8,stroke-width:3px,color:#fff
                        classDef medicalAgent fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef riskAgent fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        classDef treatmentAgent fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        classDef output fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        
                        class AO orchestrator
                        class MA,CO medicalAgent
                        class RAA,RO riskAgent
                        class TAA,TO treatmentAgent
                        class FO output
                </div>
            </div>

            <!-- YOLO Model Architecture -->
            <div class="section">
                <h2>üéØ YOLO Model Architecture</h2>
                <div class="mermaid">
                    graph TB
                        subgraph YOLOModel["üéØ YOLO11n Blood Cell Detection Model"]
                            YOLO["YOLO11n Model<br/>Ultralytics YOLO11n"]
                            YOLO_FT["Model Configuration:<br/>‚Ä¢ Blood cell-specific optimization<br/>‚Ä¢ Multi-scale detection<br/>‚Ä¢ Enhanced confidence thresholds"]
                            YOLO_Input["Input: Enhanced Blood Smear Image<br/>640x640 or variable size"]
                            YOLO_Output["Output: Cell Detection<br/>Bounding boxes + Classifications"]
                            YOLO_Features["Features:<br/>‚Ä¢ 3 cell type detection (RBC, WBC, Platelets)<br/>‚Ä¢ Confidence scoring<br/>‚Ä¢ Localization accuracy"]
                        end
                        
                        subgraph MultiStrategy["üîÑ Multi-Strategy Detection"]
                            MS["Multi-Strategy Coordinator"]
                            SC["Scale Variations<br/>0.7x, 0.85x, 1.0x, 1.15x, 1.3x"]
                            GC["Gamma Correction<br/>0.8, 1.2 contrast adjustment"]
                            CT["Confidence Thresholds<br/>0.05, 0.1, 0.15, 0.2"]
                            IA["Image Augmentation<br/>5 enhancement techniques"]
                        end
                        
                        subgraph Enhancement["üîß Image Enhancement Pipeline"]
                            IE["Image Enhancement Engine"]
                            BF["Bilateral Filtering<br/>Noise reduction"]
                            CL["CLAHE<br/>Adaptive histogram equalization"]
                            ED["Edge Detection<br/>Canny + Sobel + Laplacian"]
                            MO["Morphological Operations<br/>Cell structure enhancement"]
                            SH["Sharpening<br/>Cell boundary enhancement"]
                        end
                        
                        subgraph Validation["‚úÖ Model Validation"]
                            MV["Model Validation Pipeline"]
                            PT["Pipeline Testing<br/>End-to-end validation"]
                            FB["Fallback Models<br/>Enhanced Computer Vision Detection"]
                            ER["Error Recovery<br/>Graceful degradation"]
                            QA["Quality Assurance<br/>Detection reliability scoring"]
                        end
                        
                        %% Connections
                        YOLO_Input --> IE
                        IE --> BF
                        IE --> CL
                        IE --> ED
                        IE --> MO
                        IE --> SH
                        
                        BF --> YOLO
                        CL --> YOLO
                        ED --> YOLO
                        MO --> YOLO
                        SH --> YOLO
                        
                        YOLO --> YOLO_FT
                        YOLO_FT --> MS
                        MS --> SC
                        MS --> GC
                        MS --> CT
                        MS --> IA
                        
                        SC --> YOLO_Output
                        GC --> YOLO_Output
                        CT --> YOLO_Output
                        IA --> YOLO_Output
                        
                        YOLO --> MV
                        MV --> PT
                        MV --> FB
                        MV --> ER
                        MV --> QA
                        
                        YOLO_Output --> YOLO_Features
                        
                        %% Styling
                        classDef yoloModel fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef multiStrategy fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef enhancement fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        classDef validation fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        
                        class YOLO,YOLO_Input,YOLO_Output,YOLO_Features yoloModel
                        class YOLO_FT,MS,SC,GC,CT,IA multiStrategy
                        class IE,BF,CL,ED,MO,SH enhancement
                        class MV,PT,FB,ER,QA validation
                </div>
            </div>

            <!-- Blood Cell Classification System -->
            <div class="section">
                <h2>ü©∏ Blood Cell Classification System</h2>
                <div class="mermaid">
                    graph TB
                        subgraph CellTypes["ü©∏ Supported Blood Cell Types"]
                            CT["Blood Cell Classification System<br/>3 Primary Types"]
                            
                            %% Blood Cell Types
                            RBC["Red Blood Cells (RBC)<br/>Oxygen transport<br/>Biconcave disk shape<br/>No nucleus"]
                            WBC["White Blood Cells (WBC)<br/>Immune defense<br/>Nucleated cells<br/>Various subtypes"]
                            PLT["Platelets<br/>Blood clotting<br/>Small fragments<br/>No nucleus"]
                        end
                        
                        subgraph Classification["üîç Classification Process"]
                            CP["Classification Pipeline"]
                            FD["Feature Detection<br/>Cell morphology analysis"]
                            PA["Pattern Analysis<br/>Shape and size assessment"]
                            SA["Count Assessment<br/>Cell density evaluation"]
                            CA["Confidence Analysis<br/>Reliability scoring"]
                        end
                        
                        subgraph Characteristics["üìä Cell Characteristics"]
                            CH["Characteristic Analysis"]
                            
                            %% Normal Ranges
                            RBC_NORMAL["RBC Normal<br/>4.5-5.5 million/ŒºL"]
                            WBC_NORMAL["WBC Normal<br/>4,500-11,000/ŒºL"]
                            PLT_NORMAL["Platelets Normal<br/>150,000-450,000/ŒºL"]
                            
                            %% Clinical Significance
                            ANEMIA["Anemia Risk<br/>Low RBC count"]
                            INFECTION["Infection Risk<br/>Abnormal WBC count"]
                            BLEEDING["Bleeding Risk<br/>Low platelet count"]
                        end
                        
                        %% Connections
                        CT --> RBC
                        CT --> WBC
                        CT --> PLT
                        
                        RBC --> CP
                        WBC --> CP
                        PLT --> CP
                        
                        CP --> FD
                        CP --> PA
                        CP --> SA
                        CP --> CA
                        
                        FD --> CH
                        PA --> CH
                        SA --> CH
                        CA --> CH
                        
                        CH --> RBC_NORMAL
                        CH --> WBC_NORMAL
                        CH --> PLT_NORMAL
                        
                        RBC_NORMAL --> ANEMIA
                        WBC_NORMAL --> INFECTION
                        PLT_NORMAL --> BLEEDING
                        
                        %% Styling
                        classDef rbc fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef wbc fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef platelets fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        classDef process fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        classDef normal fill:#1abc9c,stroke:#16a085,stroke-width:2px,color:#fff
                        classDef risk fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        
                        class RBC rbc
                        class WBC wbc
                        class PLT platelets
                        class CT,CP,FD,PA,SA,CA,CH process
                        class RBC_NORMAL,WBC_NORMAL,PLT_NORMAL normal
                        class ANEMIA,INFECTION,BLEEDING risk
                </div>
            </div>

            <!-- Technology Stack -->
            <div class="section">
                <h2>üõ†Ô∏è Technology Stack</h2>
                <div class="tech-stack">
                    <div class="tech-card">
                        <h4>üñ•Ô∏è Frontend</h4>
                        <ul class="feature-list">
                            <li>Streamlit - Web Application Framework</li>
                            <li>Matplotlib - Plotting and Visualization</li>
                            <li>PIL/Pillow - Image Processing</li>
                            <li>HTML/CSS - Responsive Design</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>‚öôÔ∏è Backend</h4>
                        <ul class="feature-list">
                            <li>Python - Core Programming Language</li>
                            <li>PyTorch - Deep Learning Framework</li>
                            <li>Ultralytics - YOLO Implementation</li>
                            <li>OpenCV - Computer Vision Library</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>ü§ñ AI/ML</h4>
                        <ul class="feature-list">
                            <li>LangChain - AI Agent Framework</li>
                            <li>Groq API - High-performance LLM</li>
                            <li>YOLO11n - Object Detection Model</li>
                            <li>Multi-Agent System - Intelligent Analysis</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h4>üìä Data Processing</h4>
                        <ul class="feature-list">
                            <li>NumPy - Numerical Computing</li>
                            <li>Pandas - Data Manipulation</li>
                            <li>Scikit-learn - Machine Learning Utilities</li>
                            <li>FPDF - PDF Generation</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="section">
                <h2>üìä Performance Metrics</h2>
                <div class="mermaid">
                    graph LR
                        PT["Processing Time<br/>&lt; 15 seconds per image"]
                        AC["Accuracy<br/>&gt; 95% on fracture detection"]
                        MU["Memory Usage<br/>&lt; 4GB RAM"]
                        GM["GPU Memory<br/>&lt; 8GB VRAM (optional)"]
                        
                        FT["Cell Types<br/>3 classification categories"]
                        DS["Detection Strategies<br/>5+ enhancement techniques"]
                        IF["Image Formats<br/>JPG, PNG, BMP, TIFF"]
                        RE["Resolution<br/>Variable (640x640 optimized)"]
                        
                        MS["Multi-Strategy<br/>Scale, Gamma, Confidence variations"]
                        EA["Enhancement Accuracy<br/>Advanced preprocessing pipeline"]
                        AG["Agent Intelligence<br/>Multi-agent analysis system"]
                        QA["Quality Assurance<br/>Comprehensive validation"]
                        
                        %% Styling
                        classDef metrics fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                        classDef dataset fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
                        classDef features fill:#1abc9c,stroke:#16a085,stroke-width:2px,color:#fff
                        
                        class PT,AC,MU,GM metrics
                        class FT,DS,IF,RE dataset
                        class MS,EA,AG,QA features
                </div>
            </div>

            <!-- Security & Deployment -->
            <div class="section">
                <h2>üîí Security & Deployment</h2>
                <div class="mermaid">
                    graph TB
                        subgraph Security["üîí Security Features"]
                            EV[Environment Variables<br/>Secure API Key Management]
                            EH[Error Handling<br/>Comprehensive Exception Management]
                            IV[Input Validation<br/>Image Format & Size Validation]
                            FM[Fallback Mechanisms<br/>Graceful Degradation]
                        end
                        
                        subgraph Deployment["üöÄ Deployment Considerations"]
                            DM[Dependency Management<br/>Automatic Package Installation]
                            RO[Resource Optimization<br/>GPU/CPU Fallback Mechanisms]
                            MM[Memory Management<br/>Efficient Tensor Operations]
                            SC[Scalability<br/>Modular Architecture]
                        end
                        
                        subgraph Monitoring["üìä Monitoring & Logging"]
                            LG[Logging System<br/>Comprehensive System Monitoring]
                            PM[Performance Metrics<br/>Processing Time & Accuracy]
                            AM[Agent Monitoring<br/>Success Rate Tracking]
                            EM[Error Monitoring<br/>Failure Detection & Recovery]
                        end
                        
                        %% Connections
                        EV --> DM
                        EH --> RO
                        IV --> MM
                        FM --> SC
                        
                        LG --> PM
                        PM --> AM
                        AM --> EM
                        
                        %% Styling
                        classDef security fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef deployment fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef monitoring fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        
                        class EV,EH,IV,FM security
                        class DM,RO,MM,SC deployment
                        class LG,PM,AM,EM monitoring
                </div>
            </div>

            <!-- Future Enhancements -->
            <div class="section">
                <h2>üöÄ Future Enhancements</h2>
                <div class="mermaid">
                    graph TB
                        subgraph PlannedFeatures["üìã Planned Features"]
                            MA[Multi-modal Analysis<br/>Clinical data + Imaging integration]
                            RC[Real-time Collaboration<br/>Multi-user case review system]
                            AA[Advanced Analytics<br/>Predictive hematological analysis]
                            MA2[Mobile Application<br/>iOS/Android companion apps]
                            CD[Cloud Deployment<br/>AWS/Azure integration]
                        end
                        
                        subgraph TechnicalImprovements["üîß Technical Improvements"]
                            MO[Model Optimization<br/>Quantization and pruning]
                            FL[Federated Learning<br/>Privacy-preserving distributed training]
                            EC[Edge Computing<br/>On-device inference capabilities]
                            BI[Blockchain Integration<br/>Secure medical record management]
                        end
                        
                        subgraph Scalability["üìà Scalability Features"]
                            MD[Modular Design<br/>Independent component architecture]
                            PS[Plugin System<br/>Easy addition of new models/agents]
                            AI[API Integration<br/>RESTful service capabilities]
                            CR[Cloud Ready<br/>Containerization support]
                        end
                        
                        %% Styling
                        classDef plannedFeatures fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                        classDef technicalImprovements fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                        classDef scalability fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                        
                        class MA,RC,AA,MA2,CD plannedFeatures
                        class MO,FL,EC,BI technicalImprovements
                        class MD,PS,AI,CR scalability
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#5a6fd8',
                lineColor: '#2c3e50',
                secondaryColor: '#764ba2',
                tertiaryColor: '#f39c12'
            }
        });
    </script>
</body>
</html>